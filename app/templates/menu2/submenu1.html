

{% extends "base.html" %}

{% block title %}广告配置{% endblock %}

{% block navbar %}
<section class="content-header">
    <h1>广告配置</h1>
    <ol class="breadcrumb">
        <li><i class="fa fa-dashboard"></i> 当前位置</li>
        <li class="active">Bug</li>
    </ol>
</section>
{% endblock %}

{% block content %}
<div class="container-fluid">
        <div class="box-footer">
            <div class="alert alert-info alert-dismissible">
                <h4><i class="icon fa fa-info"></i> 温馨提示</h4>
                <ol>
                    <li>启动页广告的图片地址设置为空时，启动页广告不开启</li>
                    <li>其他位置链接尽量配置满，不要空着</li>
                </ol>
            </div>
        </div>
	<div class="row-fluid">
    <div  class="panel-body" style="height: 900px; overflow:scroll">
		<div class="span12">
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th>
							编号
						</th>
                        <th>
							标题
						</th>
                        <th>
							类型
						</th>
						<th>
							跳转地址
						</th>
                        <th>
							图片地址
						</th>
						<th>
							操作
						</th>
					</tr>
				</thead>
				<tbody>
                    {% for i in content %}
                        <tr>
                            <td>{{ i.id }}</td>
                            <td>{{ i.link_name }}</td>
                            <td>{{ i.link_type }}</td>
                            <td>{{ i.link_address }}</td>
                            <td>{{ i.link_pic }}</td>

                            <td>
                                <button id= "{{ i.id }}" value="{{ i.id }}" onclick="javascript:button_onclick({{ i.id }});">编辑</button>


                                <script>

                                $(function() {
                                    $('#{{ i.id }}').on('click', function() {
                                        //var bt_id = document.getElementById("bt");//获取按钮id
                                        var bt_id = '{{ i.id }}'
                                        data_tmp = { 'text':" data to send to server id=", 'ID':bt_id};    // data to send to server.
                                        $.post('/link_show', data_tmp, function(data){
                                            var id_link_name = document.getElementById("id_link_name");//赋值给填写的id 输入框
                                            var id_link_type = document.getElementById("id_link_type");
                                            var id_link_address = document.getElementById("id_link_address");
                                            //var id_link_describe = document.getElementById("id_link_describe");
                                            var id_link_pic = document.getElementById("id_link_pic");

                                            var obj = eval ("(" + data + ")");//读取json格式的数据

                                            id_link_name.value = obj.link_name
                                            id_link_type.value = obj.link_type
                                            id_link_address.value = obj.link_address
                                            //id_link_describe.value = obj.link_describe
                                            id_link_pic.value = obj.link_pic

                                            console.log(obj.link_name,obj.link_type,obj.link_address,obj.link_pic);
                                        });  //https://www.runoob.com/jquery/ajax-post.html 函数解释
                                    })
                                })

                                function button_onclick(row_id){
                                    //alert("这是调用函数"); //这里写你要执行的语句
                                    var sum1 = 10;
                                    var form_edit=document.getElementsByClassName("form_edit_middle");
                                    form_edit[0].className="form_edit_middle open";//打开编辑框
                                    var id_row_edit = document.getElementById("id_row_edit");//赋值给填写的id 输入框
                                    id_row_edit.value = row_id
                                    console.log(id_row_edit.value,row_id);
                                }

                                </script>


                                <div class="form_edit_middle">
                                    <form  action="link_form_edit" method="post" >
                                        <div class="input_1"><div class="login_logo">修改</div><div class="close">X</div></div>
                                            <div class="input_1">
                                                <label for="id" style="display:none">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp id &nbsp</label><input style="display:none" readonly type="text" name="id" id= 'id_row_edit'  placeholder="&nbsp;input id">
                                                <div>
                                                <label for="link_name" style="margin-top:16px">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 标题&nbsp&nbsp</label><input readonly type="text" name="link_name" id= 'id_link_name'  placeholder="&nbsp;input link_name">
                                                </div>
                                                <div>
                                                    <label for="link_type" style="margin-top:16px">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 类型&nbsp&nbsp</label><input readonly type="text" name="link_type" id= 'id_link_type'  placeholder="&nbsp;input link_type">
                                                </div>
                                                <div>
                                                    <label for="link_address" style="margin-top:16px">&nbsp&nbsp&nbsp&nbsp 跳转地址&nbsp&nbsp</label><input type="text" name="link_address" id= 'id_link_address'  placeholder="&nbsp;input link_address">
                                                </div>
                                                <div>
                                                    <label for="link_pic" style="margin-top:16px">&nbsp&nbsp&nbsp&nbsp 图片地址&nbsp&nbsp</label><input type="text" name="link_pic" id= 'id_link_pic'  placeholder="&nbsp;input link_pic">
                                                </div>
                                            </div>
                                        <div class="input_1" style="margin-top:32px"><label for="id"> </label><input class="submit_1" type="submit" value="提&nbsp;交"></div>
                                    </form>
                                </div>

                            </td>
                        </tr>
                    {% endfor %}


			</tbody>

			</table>
            <script type="text/javascript" src="../../static/js/js_rent_function.js"></script><!-- 111 -->
            <link href="../../static/css/css_rent_function.css" rel="stylesheet" type="text/css">


		</div>
            <!-- 分页开始 -->
         {% if paginate %}
        <ul class="pagination pagination-sm no-margin pull-right">

        <li><a href="/menu2_submenu1?page=1">首页</a></li>
        {% if paginate.has_prev %}
           <li class="active"><a href="/menu2_submenu1?page={{ paginate.prev_num }}">上一页</a></li>
        {% else %}
           <li class="disabled"><a href="">上一页</a></li>
        {% endif %}

        {% for v in paginate.iter_pages(1,1,3,1) %}   <!--iter_pages 是一个迭代器 返回分页栏上的页码数 如果显示不下 返回None-->
           {% if v %}                                              <!--iter_pages(left_edge=2,left_current=2,right_current=5,right_edge=2)里面默认参数，左边边缘显示2个，右边边缘显示2个，当前页码左边显示2个，当前页码右边显示5个-->
              {% if v==paginate.page %}
                 <li class="active"><a href="#">{{ v }}</a></li>    <!--显示当前页数-->
              {% else %}
                 <li><a href="/menu2_submenu1?page={{ v }}">{{v}}</a></li>   <!--显示除当前页数的其他页数-->
              {% endif %}
           {% else %}
              <li class="disabled"><a href="">&hellip;</a></li>    <!--把显示None变成省略号-->
           {% endif %}
        {% endfor %}

        {% if paginate.has_next %}
           <li class="active" ><a href="/menu2_submenu1?page={{ paginate.next_num }}">下一页</a></li>
        {% else %}
           <li class="disabled"><a href="">下一页</a></li>
        {% endif %}

           <li><a href="/menu2_submenu1?page={{ paginate.pages  }}">尾页</a></li>
        </ul>
        {% endif %}
        <!-- 分页结束 -->
    </div>

<div></div><div></div><div></div><div></div><div></div><div></div>

<script>




/////////////////////8
window.onload=function(){
	var close=document.getElementsByClassName("close");
	var form_edit_middle=document.getElementsByClassName("form_edit_middle");
	close[0].addEventListener('click',function(){
		form_edit_middle[0].className="form_edit_middle";
	})
}

</script>
</div>
</div>
{% endblock %}


{% block scripts %}

{% endblock %}

